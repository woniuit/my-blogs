---
sidebar: auto
---
## 重排和重绘

### 重排

将整个网页填白，对内容重新渲染一次。也称回流。

### 重绘

重绘指更改外观属性而不影响几何属性的渲染。

**回流对浏览器性能的消耗是高于重绘的，而且回流一定会伴随重绘，重绘却不一定伴随回流。**

### 性能优化

回流重绘在操作节点样式时频繁出现，同时也存在很大程度上的性能问题

什么情况下会产生性能问题？

- 改变窗口大小
- 修改盒模型
- 增删样式
- 重构布局
- 重设尺寸
- 改变字体
- 改动文字

如何减少和避免回流重绘

- 使用transform代替top（top是几何属性，操作top会改变节点位置从而引发回流，使用transform:translate3d(x,0,0)代替top，只会引发图层重绘，还会间接启动GPU加速）
- 使用visibility:hidden替换display:none
- 避免使用Table布局
- 避免样式节点层级过多，浏览器的CSS解析器解析css文件时，对CSS规则是从右到左匹配查找，样式层级过多会影响回流重绘效率，建议保持CSS规则在3层左右。
- 动态改变类名而不改变样式
- 避免节点属性值放在循环里当成循环变量

### display：none和visibility:hidden对比

（display:none简称DN，visibility:hidden简称VH）

1.占位表现

DN不占据空间，VH占据空间

2.触发影响

DN触发回流重绘，VH触发重绘

3.过渡影响

DN影响过渡不影响动画，VH不影响过渡不影响动画

4.株连效果

DN后自身及其子节点全都不可见

VH后自身及其子节点全都不可见但可声明子节点visibility:visible单独显示

## 盒模型

**概念**

盒模型又名框模型，是一种网页设计思维模型，它把文档节点看成一个盒子。

**组成**

box = margin + border + padding + content

标准盒模型

节点的width/height只包含content，不包含padding和border。

ie盒子模型

节点的width/height包含border、padding和content。

**块级元素**

当节点的display声明为block、list-item、table、flex或grid时，该节点被标记为块级元素。块级元素默认宽度为100%，在垂直方向上按顺序放置，同时参与块格式化上下文。

**行内元素**

当节点的display声明为inline、inline-block、inline-table、inline-flex或inline-grid时，该节点被标记为行内元素。行内元素默认宽度为auto，在水平方向上按顺序放置，同时参与行内格式化上下文。

## 格式化上下文

**概念**

格式化上下文指决定渲染区域里节点的排版、关系和相互作用的渲染规则。

**组成**

1.块格式化上下文

BFC是页面上一个独立且隔离的渲染区域，容器里的子节点不会在布局上影响到外面的节点，反之亦然。

2.行内格式化上下文

3.弹性格式化上下文

4.格栅格式化上下文

## 文档流

指节点在排版布局过程中默认使用从左往右从上往下的流式排列方式。在窗体自上而下分成一行行，且每行按照从左至右的顺序排列节点，其显著特点就是从左往右从上往下。

**脱流文档流**

指节点脱流正常文档流后，在正常文档流中的其他节点将忽略该节点并填补其原先空间。文档一旦脱流，计算其父节点高度时不会将其高度纳入，脱流节点不占据空间，因此添加浮动或定位后会对周围节点布局产生或多或少的影响。

文档流的脱流有两种方式

1.浮动布局：float:left/right

2.定位布局：position:absolute/fixed

## 层叠上下文

z-index

## 样式计算

**优先级权重**

!important >内联样式,外联样式>Id选择器>类选择器，伪类选择器，属性选择器>元素选择器，伪元素选择器>通配选择器，后代选择器，兄弟选择器

**像素单位**

PX 像素单位

em 相对于当前节点字体

rem 相对于根节点字体

vw 相对视窗宽度

vh 相对视窗高度



